"use strict";(()=>{gsap.registerPlugin(ScrollTrigger,TextPlugin);function C(t){return t.toLocaleString("en")}var l=(t,a)=>{$(t).each(function(){let n=$(this).text().trim().replace(/,/g,""),r=parseFloat(n)||0,s=parseFloat(a);if(!isNaN(s)&&r!==s){let m={val:r},E=()=>{let y=C(Math.round(m.val));$(this).text(y)};gsap.fromTo(m,{val:r},{val:s,duration:1,onUpdate:E})}})};function p(t,a){return e.labels[t]+1}function L(t){let a=$('[data-drag="point"]').eq(t),n=$('[data-drag="timeline"]');if($('[data-drag="point"]').removeClass("active"),a.addClass("active"),a.length>0&&n.length>0){let r=a.offset().left,s=n.offset().left;return r-s}return console.warn("Active dragPoint or dragTimeline not found."),0}var d=t=>{let a;t===0?a=0:t===1?a=50:a=100,gsap.to(A,{width:`${a}%`,duration:.75}),gsap.to(k,{x:L(t),duration:.75})},U=$("[graph-section]"),c=$('[data-value="1"]'),u=$('[data-value="2"]'),g=$('[data-bar="wrap"]'),f=$("[data-bar=1-1]"),W=$("[data-bar=1-2]"),o=$("[data-bar=2-1]"),z=$("[data-bar=2-2]"),H=$('[data-gain="1"]'),b=$('[data-gain="text-2"]'),h=$("[data-gain=sign-2]"),x=$('[data-gain="2"]'),_=$('[data-investment="1"]'),P=$('[data-investment="2"]'),B=$('[data-drag="timeline"]'),k=$('[data-drag="ball"]'),T=$('[data-drag="point"]'),A=$('[data-drag="fill"]'),S=$(".exchange__difference-cta-wrap"),i={value1:[3e5,3e5,584615],value2:[3e5,213125,415320],taxDrag:86875,gain1:284615,gain2:202195},q="#309157",D="#e95c20";gsap.defaults({ease:Power3.easeInOut,duration:1});gsap.set([f,o],{maxHeight:0});gsap.set(o,{background:D});gsap.set(S,{opacity:0});var F=()=>{let t=gsap.timeline({});return t.fromTo(g,{height:0},{height:"13.3em"}),t.call(d,[0],"<"),t.add(v(),"<"),t},v=()=>{let t=gsap.timeline();return t.call(l,[c,i.value1[0]],"<"),t.call(l,[u,i.value2[0]],"<"),t.call(l,[_,i.value1[0]],"<"),t.call(l,[P,i.value2[0]],"<"),t},N=()=>{let t=gsap.timeline({});return t.to(o,{maxHeight:"4.5em"}),t.set(b,{text:"Tax Drag:"},"<"),t.set(h,{text:"-$"},"<"),t.call(d,[1],"<"),t.add(w(),"<"),t},w=()=>{let t=gsap.timeline();return t.call(l,[c,i.value1[1]]),t.call(l,[x,i.taxDrag],"<"),t.call(l,[u,i.value2[1]],"<"),t.call(l,[P,i.value2[1]],"<"),t},V=()=>{let t=gsap.timeline({});return t.to(g.eq(0),{height:"97%"}),t.to(g.eq(1),{height:"18em"},"<"),t.to(f,{maxHeight:"12.5em"},"<"),t.to(o,{maxHeight:"9em",background:q},"<"),t.set(b,{text:"Capital Gain:"},"<"),t.set(h,{text:"$"},"<"),t.call(d,[2],"<"),t.add(X(),"<"),t},X=()=>{let t=gsap.timeline();return t.call(l,[c,i.value1[2]],"<"),t.call(l,[u,i.value2[2]],"<"),t.call(l,[H,i.gain1],"<"),t.call(l,[x,i.gain2],"<"),t},e=gsap.timeline({scrollTrigger:{trigger:$("[graph-section]"),start:"top center"}});e.addLabel("Part 1: Start");e.add(F());e.addLabel("Part 1: End");e.addLabel("Part 2: Start");e.add(N(),"+=1");e.addLabel("Part 2: End");e.addLabel("Part 3: Start");e.add(V(),"+=1");e.addLabel("Part 3: End");e.call(()=>{gsap.to(S,{opacity:1})});T.on("click",function(){e.pause();let t=$(this).index(),a,n;t===0?(a="Part 1: Start",n="Part 1: End",v()):t===1?(a=p("Part 2: Start",1),n="Part 2: End",w()):t===2&&(a=p("Part 3: Start",1),n="Part 3: End"),e.seek(a),e.tweenTo(n)});$("[button-restart]").on("click",function(){e.restart(),v(),d(0)});$(window).on("resize",function(){d($(T.filter(".active")).index())});})();
